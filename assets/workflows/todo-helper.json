{
  "name": "å“ˆå“ˆçš„todoå¹«æ‰‹",
  "nodes": [
    {
      "parameters": {
        "resource": "image",
        "operation": "analyze",
        "modelId": {
          "__rl": true,
          "value": "models/gemini-2.0-flash",
          "mode": "list",
          "cachedResultName": "models/gemini-2.0-flash"
        },
        "text": "=ä½ æ˜¯ä¸€å€‹å°ˆæ¥­çš„å¾…è¾¦äº‹é …ç®¡ç†åŠ©æ‰‹,ç¾åœ¨æ™‚é–“æ˜¯ {{ $now.toISO() }}ã€‚\nä»Šå¤©çš„æ—¥æœŸæ˜¯ {{ $now.toFormat('yyyy-MM-dd') }}\nã€ä½¿ç”¨è€…èº«ä»½ã€‘{{ $('è¨Šæ¯é¡å‹åˆ¤æ–·1').item.json.userName }}\nè«‹åˆ†æé€™å¼µåœ–ç‰‡(å¯èƒ½æ˜¯ LINE å°è©±æˆªåœ–ã€æœƒè­°è¨˜éŒ„ã€éƒµä»¶ç­‰),å¾ä¸­æå–æ‰€æœ‰éœ€è¦è™•ç†çš„å¾…è¾¦äº‹é …ã€‚\nè«‹ä»¥ç´” JSON æ ¼å¼å›è¦†,å›å‚³ä»»å‹™é™£åˆ—:\n{\n\"tasks\": [\n{\n\"subject\": \"å®Œæ•´æ¸…æ™°çš„ä»»å‹™æè¿°\",\n\"content\": \"è£œå……ç´°ç¯€è³‡è¨Š(é¸å¡«)\",\n\"due\": \"YYYY-MM-DD æˆ– null\",\n\"reminder\": \"YYYY-MM-DD HH:mm:ss æˆ– null\"\n}\n]\n}\nã€é‡è¦ã€‘è«‹æå–åœ–ç‰‡ä¸­çš„æ‰€æœ‰å¾…è¾¦äº‹é …,ä¸é™æ•¸é‡\nã€LINE å°è©±æˆªåœ–åˆ†æé‡é»ã€‘\n\nä»»å‹™éæ¿¾è¦å‰‡(æœ€é‡è¦):\n\nâœ… åŒ…å«: ä¸Šè¿°ä½¿ç”¨è€…èº«ä»½ä¸­çš„ä»»ä¸€åç¨± + å‹•è© â†’ é€™æ˜¯è¦æå–çš„ä»»å‹™\nâœ… åŒ…å«: æ²’æœ‰æŒ‡å®šå°è±¡çš„å¾…è¾¦äº‹é … â†’ é è¨­æ˜¯è¦æå–çš„ä»»å‹™\nâŒ æ’é™¤: å…¶ä»–äººå + å‹•è© â†’ ä¸è¦æå–\nâŒ æ’é™¤: åªæ˜¯é™³è¿°äº‹å¯¦,æ²’æœ‰è¦æ±‚åšäº‹çš„è¨Šæ¯ â†’ ä¸è¦æå–\n\n\nç¯„ä¾‹èªªæ˜:\n\nã€Œé˜¿æ‰,è«‹å®‰æ’ä¸‹é€±è»Šè¶Ÿã€ â†’ âŒ ä¸æå–(æ˜¯å«é˜¿æ‰åš)\nã€ŒHaha,æ˜å¤©çµ¦æˆ‘äº¤å ±å‘Šã€ â†’ âœ… æå–(ä½¿ç”¨è€…èº«ä»½ä¸­åŒ…å«Haha)\nã€Œæ˜å¤©è¦é–‹æœƒã€(æ²’æŒ‡å®šå°è±¡) â†’ âœ… æå–(é è¨­ä»»å‹™)\nã€Œå°çŸ­å¥èº«æ™‚ä¸è¦å†çœ‹å¦¹å­ã€ â†’ âŒ ä¸æå–(æ˜¯æé†’å°çŸ­)\n\n\né€æ¢æª¢æŸ¥æ¯å€‹è¨Šæ¯,å¯èƒ½åŒ…å«å¤šå€‹ä»»å‹™:\n\nä¸€å€‹è¨Šæ¯å¯èƒ½æåˆ°å¤šä»¶äº‹\nä¸åŒäººçš„è¨Šæ¯å¯èƒ½æŒ‡æ´¾ä¸åŒä»»å‹™\næ³¨æ„æ™‚é–“é †åºå’Œä¸Šä¸‹æ–‡é—œä¿‚\n\n\nä»»å‹™è­˜åˆ¥æ¨™èªŒ:\n\nè¡Œå‹•è©å½™: ã€Œè¨˜å¾—ã€ã€ã€Œè¦ã€ã€ã€Œéœ€è¦ã€ã€ã€Œéº»ç…©ã€ã€ã€Œè«‹ã€ã€ã€Œäº¤ã€ã€ã€Œçµ¦ã€\næ™‚é–“æ¨™è¨˜: ã€Œæ˜å¤©ã€ã€ã€Œä¸‹é€±ã€ã€ã€Œæœˆåº•å‰ã€\næ‰¿è«¾å›æ‡‰: ã€Œå¥½ã€ã€ã€ŒOKã€ã€ã€Œæ²’å•é¡Œã€ã€ã€Œæœƒè™•ç†ã€\nåˆ—èˆ‰é …ç›®: ã€Œ1.ã€ã€ã€Œ2.ã€ã€ã€Œâ€¢ã€ã€ã€Œãƒ»ã€ã€ã€Œ-ã€\n\n\n\nã€Subject æ’°å¯«åŸå‰‡ã€‘\næ¯å€‹ä»»å‹™çš„ subject éƒ½è¦ç¨ç«‹å®Œæ•´,èƒ½å–®ç¨ç†è§£:\nâœ“ ã€Œæº–å‚™é€±äº”ç”¢å“æœƒè­°ç°¡å ±ã€\nâœ“ ã€Œåˆ—å°é€±äº”æœƒè­°è³‡æ–™20ä»½ã€\nâœ“ ã€Œæäº¤1-9æœˆKPIæˆæœå ±å‘Šã€\nã€ä»»å‹™é—œè¯è™•ç†ã€‘\n\nç›¸é—œä»»å‹™å¯åœ¨ content ä¸­è¨»æ˜é—œè¯\nä¾‹å¦‚: content: ã€Œæ­¤ç‚ºé€±äº”ç”¢å“æœƒè­°æº–å‚™äº‹é …ä¹‹ä¸€ã€\n\nã€æ™‚é–“è§£æè¦å‰‡ - é‡è¦ã€‘\n\nåˆ°æœŸæ—¥æœŸ (due) - åªéœ€è¦æ—¥æœŸ,ä¸è¦æ™‚é–“:\n\nã€Œæ˜å¤©ã€ â†’ 2025-10-20\nã€Œä¸‹é€±ã€ â†’ ä¸‹é€±ä¸€çš„æ—¥æœŸ\nã€Œæœˆåº•å‰ã€ â†’ ç•¶æœˆæœ€å¾Œä¸€å¤©\nã€Œä¸‹é€±äº”ã€ â†’ ä¸‹é€±äº”çš„æ—¥æœŸ\nã€Œ10æœˆ20æ—¥ã€ â†’ 2025-10-20\n\n\næé†’æ™‚é–“ (reminder) - éœ€è¦å®Œæ•´æ—¥æœŸ+æ™‚é–“:\n\nç•¶ä½¿ç”¨è€…èªªã€ŒXé»æé†’ã€æ™‚,reminderå°±æ˜¯Xé»,ä¸è¦è‡ªå‹•æå‰!\nã€Œæ—©ä¸Š9é»æé†’ã€ â†’ YYYY-MM-DD 09:00:00 (å°±æ˜¯9é»,ä¸æ˜¯8:30)\nã€Œæ™šä¸Šå…­é»æé†’ã€ â†’ YYYY-MM-DD 18:00:00 (å°±æ˜¯18é»,ä¸æ˜¯17:30)\nã€Œä¸‹åˆ3é»æé†’ã€ â†’ YYYY-MM-DD 15:00:00 (å°±æ˜¯15é»,ä¸æ˜¯14:30)\nã€Œæå‰1å°æ™‚æé†’ã€ â†’ æ‰éœ€è¦è¨ˆç®—æå‰æ™‚é–“\næ²’æåˆ°æé†’ â†’ null\nåªæœ‰ç•¶ä»»å‹™æœ¬èº«æœ‰å…·é«”æ™‚é–“(å¦‚ã€Œä¸‹åˆ3é»é–‹æœƒã€),ä¸”æ²’èªªæé†’æ™‚é–“,æ‰è‡ªå‹•æå‰30åˆ†é˜\n\n\nç¯„ä¾‹:\n\nã€Œæ˜å¤©è¦è²·èœã€ â†’ due: 2025-10-20, reminder: null\nã€Œæ˜å¤©è¦è²·èœ,æ—©ä¸Š9é»æé†’ã€ â†’ due: 2025-10-20, reminder: 2025-10-20 09:00:00\nã€Œæé†’æˆ‘ä»Šå¤©æ™šä¸Šå…­é»è¦è®€è®€æ›¸æœƒçš„æ›¸ã€ â†’ due: 2025-10-19, reminder: 2025-10-19 18:00:00\nã€Œæ˜å¤©ä¸‹åˆ3é»é–‹æœƒã€(æ²’èªªæé†’æ™‚é–“) â†’ due: 2025-10-20, reminder: 2025-10-20 14:30:00\nã€Œä¸‹é€±ä¸€äº¤å ±å‘Šã€ â†’ due: 2025-10-21, reminder: null\n\n\n\nã€å„ªå…ˆé †åºæç¤ºã€‘(åœ¨ content ä¸­æ¨™è¨»)\n\nç·Šæ€¥: ã€Œ[ç·Šæ€¥]ã€\né‡è¦: ã€Œ[é‡è¦]ã€\nå¯é¸: ã€Œ[é¸æ“‡æ€§]ã€\n\nã€ç¯„ä¾‹ - æ­£ç¢ºéæ¿¾ã€‘\nåœ–ç‰‡å…§å®¹:\nã€Œé˜¿æ‰,è«‹å®‰æ’çŸ½å“äºŒæ—å» ä¸‹é€±è»Šè¶Ÿ\nHaha,æ˜å¤©ä¸‹ç­å‰çµ¦æˆ‘äº¤1-9æœˆkpiæˆæœ\nå°çŸ­å¥èº«æ™‚ä¸è¦å†çœ‹å¦¹å­,å¥½å¥½ç·´,å¥½å—?ã€\næ­£ç¢ºè¼¸å‡º:\n{\n\"tasks\": [\n{\n\"subject\": \"æäº¤1-9æœˆKPIæˆæœå ±å‘Š\",\n\"content\": \"\",\n\"due\": \"2025-10-20\",\n\"reminder\": \"2025-10-20 15:00:00\"\n}\n]\n}\nå¦‚æœåœ–ç‰‡ä¸­æ²’æœ‰ä»»ä½•å¾…è¾¦äº‹é …,å›å‚³:\n{\n\"tasks\": []\n}\nåªè¼¸å‡º JSON,ä¸è¦ä»»ä½•èªªæ˜æ–‡å­—ã€‚",
        "inputType": "binary",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.googleGemini",
      "typeVersion": 1,
      "position": [
        -336,
        -16
      ],
      "id": "e236e890-c83b-4926-bfaa-d093a1a85113",
      "name": "Gemini åˆ†æåœ–ç‰‡å…§å®¹",
      "credentials": {
        "googlePalmApi": {
          "id": "1h781B9U5c9IZuiP",
          "name": "Google Gemini(PaLM) Api account"
        }
      }
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "models/gemini-2.0-flash-lite",
          "mode": "list",
          "cachedResultName": "models/gemini-2.0-flash-lite"
        },
        "messages": {
          "values": [
            {
              "content": "={{ $json.event.message.text }}"
            }
          ]
        },
        "jsonOutput": true,
        "options": {
          "systemMessage": "=ä½ æ˜¯ä¸€å€‹å°ˆæ¥­çš„å¾…è¾¦äº‹é …ç®¡ç†åŠ©æ‰‹,ç¾åœ¨æ™‚é–“æ˜¯ {{ $now.toISO() }}ã€‚\nä»Šå¤©çš„æ—¥æœŸæ˜¯ {{ $now.toFormat('yyyy-MM-dd') }}\n\nã€ä½¿ç”¨è€…èº«ä»½ã€‘{{ $('è¨Šæ¯é¡å‹åˆ¤æ–·1').item.json.userName }}\n\nè«‹å¾ä½¿ç”¨è€…çš„æ–‡å­—è¨Šæ¯ä¸­æå–æ‰€æœ‰å¾…è¾¦äº‹é …ã€‚\n\nè«‹ä»¥ç´” JSON æ ¼å¼å›è¦†:\n{\n  \"tasks\": [\n    {\n      \"subject\": \"å®Œæ•´æ¸…æ™°çš„ä»»å‹™æè¿°\",\n      \"content\": \"è£œå……ç´°ç¯€(é¸å¡«)\",\n      \"due\": \"YYYY-MM-DD æˆ– null\",\n      \"reminder\": \"YYYY-MM-DD HH:mm:ss æˆ– null\"\n    }\n  ]\n}\n\nã€ä»»å‹™éæ¿¾è¦å‰‡ã€‘\n1. å¦‚æœè¨Šæ¯ä¸­æåˆ°å…¶ä»–äººåå­— + å‹•è©:\n   - âœ… æå–: ä¸Šè¿°ä½¿ç”¨è€…èº«ä»½ä¸­çš„ä»»ä¸€åç¨± + å‹•è©\n   - âŒ æ’é™¤: å…¶ä»–äººå + å‹•è©\n   \n2. å¦‚æœæ²’æœ‰æŒ‡å®šå°è±¡,é è¨­æ˜¯ä½¿ç”¨è€…çš„ä»»å‹™\n\n3. ç¯„ä¾‹:\n   - ã€Œé˜¿æ‰è¦å»é–‹æœƒ,æˆ‘æ˜å¤©è¦äº¤å ±å‘Šã€ â†’ åªæå–ã€Œäº¤å ±å‘Šã€\n   - ã€Œæ˜å¤©é–‹æœƒ,è¨˜å¾—å¸¶è³‡æ–™ã€ â†’ æå–2å€‹ä»»å‹™\n   - ã€Œå°æ˜å»è²·å’–å•¡ã€ â†’ ä¸æå–(æ˜¯å«å°æ˜åš)\n\nã€å¤šä»»å‹™è­˜åˆ¥ã€‘\n1. é€£æ¥è©åˆ†éš”:\n   - ã€Œé‚„æœ‰ã€ã€ã€Œå¦å¤–ã€ã€ã€Œé‚„è¦ã€ã€ã€Œä»¥åŠã€ã€ã€Œé †ä¾¿ã€\n   - ç¯„ä¾‹: ã€Œæ˜å¤©é–‹æœƒ,é‚„è¦è¨˜å¾—å¸¶å ±å‘Šã€ â†’ 2å€‹ä»»å‹™\n\n2. æ¨™é»ç¬¦è™Ÿåˆ†éš”:\n   - é€—è™Ÿã€å¥è™Ÿã€åˆ†è™Ÿåˆ†éš”çš„ç¨ç«‹äº‹é …\n   - ç¯„ä¾‹: ã€Œè²·ç‰›å¥¶ã€éºµåŒ…ã€é›è›‹ã€ â†’ å¯åˆä½µç‚º1å€‹è³¼ç‰©ä»»å‹™æˆ–åˆ†ç‚º3å€‹\n\n3. æ™‚é–“ä¸åŒçš„ä»»å‹™:\n   - ã€Œæ—©ä¸Šé–‹æœƒ,ä¸‹åˆæ‹œè¨ªå®¢æˆ¶ã€ â†’ 2å€‹ä»»å‹™\n\n4. åˆ—èˆ‰æ ¼å¼:\n   - æ•¸å­—æˆ–ç¬¦è™Ÿé–‹é ­çš„é …ç›®\n   - æ¯é …éƒ½æ˜¯ç¨ç«‹ä»»å‹™\n\nã€æ™ºæ…§åˆä½µåŸå‰‡ã€‘\n- åŒé¡å‹å°ä»»å‹™å¯åˆä½µ:\n  - ã€Œè²·ç‰›å¥¶ã€è²·éºµåŒ…ã€ â†’ ã€Œæ¡è²·:ç‰›å¥¶ã€éºµåŒ…ã€\n- ä¸åŒæ€§è³ªä»»å‹™é ˆåˆ†é–‹:\n  - ã€Œé–‹æœƒã€è²·æ±è¥¿ã€ â†’ 2å€‹ç¨ç«‹ä»»å‹™\n\nã€æ™‚é–“è§£æè¦å‰‡ - é‡è¦ã€‘\n1. åˆ°æœŸæ—¥æœŸ (due) - åªéœ€è¦æ—¥æœŸ,ä¸è¦æ™‚é–“:\n   - ã€Œæ˜å¤©ã€ â†’ 2025-10-20\n   - ã€Œä¸‹é€±ã€ â†’ ä¸‹é€±ä¸€çš„æ—¥æœŸ\n   - ã€Œæœˆåº•å‰ã€ â†’ ç•¶æœˆæœ€å¾Œä¸€å¤©\n   - ã€Œä¸‹é€±äº”ã€ â†’ ä¸‹é€±äº”çš„æ—¥æœŸ\n\n2. æé†’æ™‚é–“ (reminder) - éœ€è¦å®Œæ•´æ—¥æœŸ+æ™‚é–“:\n   - **ç•¶ä½¿ç”¨è€…èªªã€ŒXé»æé†’ã€æ™‚,reminderå°±æ˜¯Xé»,ä¸è¦è‡ªå‹•æå‰!**\n   - ã€Œæ—©ä¸Š9é»æé†’ã€ â†’ YYYY-MM-DD 09:00:00 (å°±æ˜¯9é»,ä¸æ˜¯8:30)\n   - ã€Œæ™šä¸Šå…­é»æé†’ã€ â†’ YYYY-MM-DD 18:00:00 (å°±æ˜¯18é»,ä¸æ˜¯17:30)\n   - ã€Œä¸‹åˆ3é»æé†’ã€ â†’ YYYY-MM-DD 15:00:00 (å°±æ˜¯15é»,ä¸æ˜¯14:30)\n   - ã€Œæå‰1å°æ™‚æé†’ã€ â†’ æ‰éœ€è¦è¨ˆç®—æå‰æ™‚é–“\n   - æ²’æåˆ°æé†’ â†’ null\n   - **åªæœ‰ç•¶ä»»å‹™æœ¬èº«æœ‰å…·é«”æ™‚é–“(å¦‚ã€Œä¸‹åˆ3é»é–‹æœƒã€),ä¸”æ²’èªªæé†’æ™‚é–“,æ‰è‡ªå‹•æå‰30åˆ†é˜**\n\n3. ç¯„ä¾‹:\n   - ã€Œæ˜å¤©è¦è²·èœã€ â†’ due: 2025-10-20, reminder: null\n   - ã€Œæ˜å¤©è¦è²·èœ,æ—©ä¸Š9é»æé†’ã€ â†’ due: 2025-10-20, reminder: 2025-10-20 09:00:00\n   - ã€Œæé†’æˆ‘ä»Šå¤©æ™šä¸Šå…­é»è¦è®€è®€æ›¸æœƒçš„æ›¸ã€ â†’ due: 2025-10-19, reminder: 2025-10-19 18:00:00\n   - ã€Œä»Šå¤©è¦è®€è®€æ›¸æœƒçš„æ›¸ æ™šä¸Šå…­é»æé†’æˆ‘ã€ â†’ due: 2025-10-19, reminder: 2025-10-19 18:00:00\n   - ã€Œæ˜å¤©ä¸‹åˆ3é»é–‹æœƒã€(æ²’èªªæé†’æ™‚é–“) â†’ due: 2025-10-20, reminder: 2025-10-20 14:30:00\n   - ã€Œæ˜å¤©ä¸‹åˆ3é»é–‹æœƒ,æå‰1å°æ™‚æé†’ã€ â†’ due: 2025-10-20, reminder: 2025-10-20 14:00:00\n   - ã€Œä¸‹é€±ä¸€äº¤å ±å‘Šã€ â†’ due: 2025-10-21, reminder: null\n\nã€ç¯„ä¾‹ - æ­£ç¢ºéæ¿¾ã€‘\nè¼¸å…¥: ã€Œé˜¿æ‰è¦å»å®‰æ’è»Š,Hahaä½ æ˜å¤©è¦åšä¸‰ä»¶äº‹:1.æ—©ä¸Š9é»é–‹æœƒ 2.ä¸‹åˆ2é»çœ‹ç‰™é†« 3.æ™šä¸Š7é»æ¥å°å­©ã€\n\nè¼¸å‡º:\n{\n  \"tasks\": [\n    {\n      \"subject\": \"åƒåŠ æ—©æ™¨æœƒè­°\",\n      \"content\": \"\",\n      \"due\": \"2025-10-20\",\n      \"reminder\": \"2025-10-20 08:30:00\"\n    },\n    {\n      \"subject\": \"ç‰™é†«é–€è¨ºé ç´„\",\n      \"content\": \"\",\n      \"due\": \"2025-10-20\",\n      \"reminder\": \"2025-10-20 13:30:00\"\n    },\n    {\n      \"subject\": \"æ¥é€å­©å­\",\n      \"content\": \"\",\n      \"due\": \"2025-10-20\",\n      \"reminder\": \"2025-10-20 18:30:00\"\n    }\n  ]\n}\n\nè¼¸å…¥: ã€Œæ˜å¤©è¦è²·èœ,æ—©ä¸Š9é»æé†’ã€\n\nè¼¸å‡º:\n{\n  \"tasks\": [\n    {\n      \"subject\": \"è²·èœ\",\n      \"content\": \"\",\n      \"due\": \"2025-10-20\",\n      \"reminder\": \"2025-10-20 09:00:00\"\n    }\n  ]\n}\n\nè¼¸å…¥: ã€Œæé†’æˆ‘ä»Šå¤©æ™šä¸Šå…­é»è¦è®€è®€æ›¸æœƒçš„æ›¸ã€\n\nè¼¸å‡º:\n{\n  \"tasks\": [\n    {\n      \"subject\": \"é–±è®€è®€æ›¸æœƒçš„æ›¸\",\n      \"content\": \"\",\n      \"due\": \"2025-10-19\",\n      \"reminder\": \"2025-10-19 18:00:00\"\n    }\n  ]\n}\n\nå¦‚æœè¨Šæ¯ä¸­æ²’æœ‰å¾…è¾¦äº‹é …,å›å‚³:\n{\n  \"tasks\": []\n}\n\nåªè¼¸å‡º JSONã€‚",
          "maxOutputTokens": 256,
          "temperature": 0.1
        }
      },
      "type": "@n8n/n8n-nodes-langchain.googleGemini",
      "typeVersion": 1,
      "position": [
        -416,
        176
      ],
      "id": "ade5abac-d870-4d1a-a0c7-cb2919410985",
      "name": "Gemini åˆ†ææ–‡å­—è¨Šæ¯",
      "credentials": {
        "googlePalmApi": {
          "id": "1h781B9U5c9IZuiP",
          "name": "Google Gemini(PaLM) Api account"
        }
      }
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "models/gemini-2.0-flash-lite",
          "mode": "list",
          "cachedResultName": "models/gemini-2.0-flash-lite"
        },
        "messages": {
          "values": [
            {
              "content": "={{ $json.content.parts[0].text }}"
            }
          ]
        },
        "jsonOutput": true,
        "options": {
          "systemMessage": "=ã€é‡è¦ã€‘è«‹å°‡æ‰€æœ‰ç°¡é«”ä¸­æ–‡è½‰æ›ç‚ºç¹é«”ä¸­æ–‡(å°ç£ç”¨èª)å¾Œå†è™•ç†ã€‚\n\nä½ æ˜¯ä¸€å€‹å°ˆæ¥­çš„å¾…è¾¦äº‹é …ç®¡ç†åŠ©æ‰‹,ç¾åœ¨æ™‚é–“æ˜¯ {{ $now.toISO() }}ã€‚\nä»Šå¤©çš„æ—¥æœŸæ˜¯ {{ $now.toFormat('yyyy-MM-dd') }}\n\nã€ä½¿ç”¨è€…èº«ä»½ã€‘{{ $('è¨Šæ¯é¡å‹åˆ¤æ–·1').item.json.userName }}\n\nè«‹å¾èªéŸ³è½‰æ–‡å­—çš„å…§å®¹ä¸­æå–å¾…è¾¦äº‹é …(æ³¨æ„:èªéŸ³è¾¨è­˜å¯èƒ½æœ‰éŒ¯å­—æˆ–ç¼ºå°‘æ¨™é»,ä¸”å¯èƒ½æ˜¯ç°¡é«”ä¸­æ–‡)ã€‚\n\nè«‹ä»¥ç´” JSON æ ¼å¼å›è¦†(ä½¿ç”¨ç¹é«”ä¸­æ–‡):\n{\n  \"tasks\": [\n    {\n      \"subject\": \"å®Œæ•´æ¸…æ™°çš„ä»»å‹™æè¿°(ç¹é«”ä¸­æ–‡)\",\n      \"content\": \"è£œå……ç´°ç¯€(é¸å¡«,ç¹é«”ä¸­æ–‡)\",\n      \"due\": \"YYYY-MM-DD æˆ– null\",\n      \"reminder\": \"YYYY-MM-DD HH:mm:ss æˆ– null\"\n    }\n  ]\n}\n\nã€èªéŸ³å…§å®¹ç‰¹æ®Šè™•ç†ã€‘\n1. å®¹éŒ¯è™•ç†:\n   - è‡ªå‹•å°‡ç°¡é«”ä¸­æ–‡è½‰ç‚ºç¹é«”ä¸­æ–‡\n   - å¿½ç•¥èªæ°£è©: ã€Œå‘ƒã€ã€ã€Œå—¯ã€ã€ã€Œå•Šã€ã€ã€Œå–”ã€\n   - ä¿®æ­£å¸¸è¦‹éŒ¯å­—: ã€Œåœ¨ã€vsã€Œå†ã€ã€ã€Œçš„åœ°å¾—ã€\n   - è‡ªå‹•æ–·å¥ç†è§£(èªéŸ³å¯èƒ½ç„¡æ¨™é»)\n\n2. å£èªè½‰æ›¸é¢èª:\n   - ã€Œæ¬¸ä½ è¨˜å¾—...ã€ â†’ æå–æ ¸å¿ƒä»»å‹™\n   - ã€Œé‚£å€‹...å°±æ˜¯...ã€ â†’ è­˜åˆ¥å¯¦éš›å…§å®¹\n   - ã€Œå¹«æˆ‘ä¸€ä¸‹...ã€ â†’ è½‰ç‚ºå…·é«”ä»»å‹™\n\n3. Subject å„ªåŒ–:\n   - æ•´ç†é›¶æ•£çš„å£èªè¡¨é”\n   - æç…‰æ ¸å¿ƒè¡Œå‹•é …ç›®\n   - ç¢ºä¿ä»»å‹™æè¿°å®Œæ•´ä¸”å°ˆæ¥­\n\nã€å°ç£å£èªæ™‚é–“è½‰æ›ã€‘\n- ã€Œç­‰ä¸€ä¸‹ã€/ã€Œç­‰ç­‰ã€/ã€Œå¾…æœƒã€ â†’ 1-2å°æ™‚å¾Œ\n- ã€Œæ—©é»ã€/ã€Œæ—©ä¸€é»ã€ â†’ æå‰1å°æ™‚\n- ã€Œè¶•å¿«ã€/ã€Œé¦¬ä¸Šã€ â†’ 30åˆ†é˜å…§\n- ã€Œæœ‰ç©ºå†...ã€ â†’ ä¸è¨­å®šæ™‚é–“(null)\n\næ•¸å­—è®€éŸ³è½‰æ›:\n- ã€Œä¸‰é»ã€/ã€Œä¸‰é»é˜ã€ â†’ 15:00:00(ä¾ä¸Šä¸‹æ–‡åˆ¤æ–·)\n- ã€Œåé»åŠã€ â†’ 10:30:00 æˆ– 22:30:00\n- ã€Œä¹é»ä¸€åˆ»ã€ â†’ 09:15:00\n- ã€Œå…­é»å››åäº”ã€ â†’ 06:45:00 æˆ– 18:45:00\n- ã€Œä¸Šåˆ11é»ã€ â†’ 11:00:00\n- ã€Œä¸‹åˆ3é»ã€ â†’ 15:00:00\n\nã€æ™ºæ…§åˆ¤æ–·ä¸Šä¸‹åˆã€‘\næ ¹æ“šå¸¸ç†åˆ¤æ–·:\n- ã€Œåƒæ—©é¤ã€ â†’ ä¸Šåˆ\n- ã€Œåˆä¼‘å¾Œã€ â†’ ä¸‹åˆ\n- ã€Œä¸‹ç­å¾Œã€ â†’ å‚æ™š/æ™šä¸Š\n- ã€Œç¡å‰ã€ â†’ æ™šä¸Š21:00-23:00\n\nã€Content å…§å®¹èƒå–ã€‘\nå¾å£èªä¸­æå–:\n- åƒèˆ‡äºº: ã€Œè·Ÿèª°ã€ã€ã€Œå’Œèª°ã€\n- åœ°é»: ã€Œåœ¨å“ªã€ã€ã€Œå»å“ªã€\n- åŸå› : ã€Œå› ç‚ºã€ã€ã€Œç‚ºäº†ã€\n- å‚™è¨»: ã€Œé †ä¾¿ã€ã€ã€Œè¨˜å¾—è¦ã€\n\nã€æ™‚é–“è§£æè¦å‰‡ - é‡è¦ã€‘\n1. åˆ°æœŸæ—¥æœŸ (due) - åªéœ€è¦æ—¥æœŸ,ä¸è¦æ™‚é–“:\n   - ã€Œæ˜å¤©ã€ â†’ 2025-10-20\n   - ã€Œä¸‹é€±ã€ â†’ ä¸‹é€±ä¸€çš„æ—¥æœŸ\n   - ã€Œé€±æœ«ã€ â†’ æœ¬é€±å…­çš„æ—¥æœŸ\n\n2. æé†’æ™‚é–“ (reminder) - éœ€è¦å®Œæ•´æ—¥æœŸ+æ™‚é–“:\n   - **ç•¶ä½¿ç”¨è€…èªªã€ŒXé»æé†’ã€æ™‚,reminderå°±æ˜¯Xé»,ä¸è¦è‡ªå‹•æå‰!**\n   - ã€Œä¸Šåˆ11é»æé†’ã€ â†’ YYYY-MM-DD 11:00:00 (å°±æ˜¯11é»,ä¸æ˜¯10:30)\n   - ã€Œä¸‹åˆ3é»æé†’ã€ â†’ YYYY-MM-DD 15:00:00 (å°±æ˜¯15é»,ä¸æ˜¯14:30)\n   - ã€Œæ™šä¸Šå…­é»æé†’ã€ â†’ YYYY-MM-DD 18:00:00 (å°±æ˜¯18é»,ä¸æ˜¯17:30)\n   - ã€Œæå‰1å°æ™‚æé†’ã€ â†’ æ‰éœ€è¦è¨ˆç®—æå‰æ™‚é–“\n   - æ²’æåˆ°æé†’ â†’ null\n   - **åªæœ‰ç•¶ä»»å‹™æœ¬èº«æœ‰å…·é«”æ™‚é–“(å¦‚ã€Œä¸‹åˆ3é»é–‹æœƒã€),ä¸”æ²’èªªæé†’æ™‚é–“,æ‰è‡ªå‹•æå‰30åˆ†é˜**\n\nã€ç¯„ä¾‹ã€‘\nèªéŸ³è¼¸å…¥: ã€Œæ˜å¤©ä¸Šåˆ11é»æé†’æˆ‘å’Œè€é—†åƒåˆé¤ã€\nè¼¸å‡º:\n{\n  \"tasks\": [\n    {\n      \"subject\": \"èˆ‡è€é—†å…±é€²åˆé¤\",\n      \"content\": \"\",\n      \"due\": \"2025-10-20\",\n      \"reminder\": \"2025-10-20 11:00:00\"\n    }\n  ]\n}\n\nèªéŸ³è¼¸å…¥: ã€Œæé†’æˆ‘ä»Šå¤©æ™šä¸Šå…­é»è¦è®€è®€æ›¸æœƒçš„æ›¸ã€\nè¼¸å‡º:\n{\n  \"tasks\": [\n    {\n      \"subject\": \"é–±è®€è®€æ›¸æœƒçš„æ›¸\",\n      \"content\": \"\",\n      \"due\": \"2025-10-19\",\n      \"reminder\": \"2025-10-19 18:00:00\"\n    }\n  ]\n}\n\nèªéŸ³è¼¸å…¥: ã€Œæ˜å¤©ä¸‹åˆ3é»é–‹æœƒã€(æ²’èªªæé†’æ™‚é–“)\nè¼¸å‡º:\n{\n  \"tasks\": [\n    {\n      \"subject\": \"åƒåŠ æœƒè­°\",\n      \"content\": \"\",\n      \"due\": \"2025-10-20\",\n      \"reminder\": \"2025-10-20 14:30:00\"\n    }\n  ]\n}\n\nèªéŸ³è¼¸å…¥: ã€Œæ˜å¤©ä¸‹åˆ3é»é–‹æœƒ,æå‰1å°æ™‚æé†’ã€\nè¼¸å‡º:\n{\n  \"tasks\": [\n    {\n      \"subject\": \"åƒåŠ æœƒè­°\",\n      \"content\": \"\",\n      \"due\": \"2025-10-20\",\n      \"reminder\": \"2025-10-20 14:00:00\"\n    }\n  ]\n}\n\nå¦‚æœèªéŸ³å…§å®¹ä¸å«å¾…è¾¦äº‹é …(å¦‚å•å€™ã€èŠå¤©),å›å‚³:\n{\n  \"tasks\": []\n}\n\nåªè¼¸å‡º JSONã€‚",
          "maxOutputTokens": 256,
          "temperature": 0.1
        }
      },
      "type": "@n8n/n8n-nodes-langchain.googleGemini",
      "typeVersion": 1,
      "position": [
        -416,
        368
      ],
      "id": "c787f0bf-857b-429b-b828-c1fd7d37bd63",
      "name": "Gemini åˆ†æèªéŸ³è½‰æ–‡å­—å¾Œè¨Šæ¯",
      "credentials": {
        "googlePalmApi": {
          "id": "1h781B9U5c9IZuiP",
          "name": "Google Gemini(PaLM) Api account"
        }
      }
    },
    {
      "parameters": {
        "resource": "audio",
        "modelId": {
          "__rl": true,
          "value": "models/gemini-2.0-flash",
          "mode": "list",
          "cachedResultName": "models/gemini-2.0-flash"
        },
        "inputType": "binary",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.googleGemini",
      "typeVersion": 1,
      "position": [
        -640,
        368
      ],
      "id": "0ec43d8d-58ca-402c-bca0-596eb8e3c018",
      "name": "Gemini èªéŸ³è½‰æ–‡å­—",
      "credentials": {
        "googlePalmApi": {
          "id": "1h781B9U5c9IZuiP",
          "name": "Google Gemini(PaLM) Api account"
        }
      }
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "haha1012",
        "options": {}
      },
      "id": "9ade8ed1-6ffa-418b-85c4-075fc41a3766",
      "name": "LINE Webhook è§¸ç™¼å™¨1",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 1,
      "position": [
        -1536,
        176
      ],
      "webhookId": "721dd7b3-0c85-4a1b-8d5e-9515cb5886f1"
    },
    {
      "parameters": {
        "mode": "runOnceForEachItem",
        "jsCode": "// å–å¾—LINEè¨Šæ¯å…§å®¹\nconst event = $json.body.events[0];\nconst messageType = event.message.type;\nconst userId = event.source.userId;\nconst replyToken = event.replyToken;\n\n// æ ¹æ“šè¨Šæ¯é¡å‹è¨­å®šä¸åŒè™•ç†è·¯å¾‘\nlet route = \"text\";\nif (messageType === \"image\") {\n  route = \"image\";\n} else if (messageType === \"audio\") {\n  route = \"audio\";\n}\n\nreturn {\n  json: {\n    event,\n    messageType,\n    userId,\n    replyToken,\n    route,\n    messageId: event.message.id,\n    timestamp: event.timestamp,\n    userName: \"é»ƒå¥•å„’ã€å“ˆå“ˆã€Hahaã€haha\"\n  }\n};"
      },
      "id": "8f474f9c-dc7e-42d0-9357-4873446e7d91",
      "name": "è¨Šæ¯é¡å‹åˆ¤æ–·1",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -1312,
        176
      ]
    },
    {
      "parameters": {
        "dataType": "string",
        "value1": "={{ $json.event.message.type }}",
        "rules": {
          "rules": [
            {
              "value2": "text",
              "output": 1
            },
            {
              "value2": "image"
            },
            {
              "value2": "audio",
              "output": 2
            }
          ]
        }
      },
      "id": "467ea712-16ac-4a8d-bdf0-6a1fc0e48feb",
      "name": "è·¯ç”±åˆ†é…1",
      "type": "n8n-nodes-base.switch",
      "typeVersion": 1,
      "position": [
        -1088,
        144
      ]
    },
    {
      "parameters": {
        "url": "=https://api-data.line.me/v2/bot/message/{{$json.messageId}}/content",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "options": {}
      },
      "id": "f4596fcc-aa08-4676-8123-b54d1983047a",
      "name": "å–å¾—åœ–ç‰‡å…§å®¹1",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -640,
        -16
      ],
      "credentials": {
        "httpHeaderAuth": {
          "id": "7r1KaKeljG2wL19f",
          "name": "Header Auth Account(å“ˆå“ˆå“ˆå“ˆ)"
        }
      }
    },
    {
      "parameters": {
        "url": "=https://api-data.line.me/v2/bot/message/{{$json.messageId}}/content",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "options": {}
      },
      "id": "4a71e8a3-87d4-4a3d-8e84-9f54b164d7e0",
      "name": "å–å¾—èªéŸ³å…§å®¹1",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -864,
        368
      ],
      "credentials": {
        "httpHeaderAuth": {
          "id": "7r1KaKeljG2wL19f",
          "name": "Header Auth Account(å“ˆå“ˆå“ˆå“ˆ)"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// Mode: Run Once for Each Item\n// è§£æGeminiå›æ‡‰ä¸¦æº–å‚™Microsoft To Doä»»å‹™\n\nlet taskData;\n\ntry {\n  // è™•ç† Gemini çš„å›æ‡‰çµæ§‹\n  let content;\n  \n  // æª¢æŸ¥å„ç¨®å¯èƒ½çš„ Gemini å›æ‡‰æ ¼å¼\n  if (Array.isArray($json) && $json[0]?.content?.parts?.[0]?.text) {\n    content = $json[0].content.parts[0].text;\n  } else if ($json.content?.parts?.[0]?.text) {\n    content = $json.content.parts[0].text;\n  } else if ($json.candidates && Array.isArray($json.candidates)) {\n    content = $json.candidates[0]?.content?.parts?.[0]?.text;\n  } else if ($json.parts?.[0]?.text) {\n    content = $json.parts[0].text;\n  } else if (typeof $json === 'string') {\n    content = $json;\n  } else {\n    content = $json.text || $json.message || JSON.stringify($json);\n  }\n  \n  console.log(\"æå–çš„å…§å®¹:\", content);\n  \n  // æ¸…ç†ä¸¦è§£æ JSON\n  if (typeof content === 'string') {\n    const cleanedContent = content\n      .replace(/```json\\s*/gi, '')\n      .replace(/```\\s*/g, '')\n      .trim();\n    \n    console.log(\"æ¸…ç†å¾Œçš„å…§å®¹:\", cleanedContent);\n    taskData = JSON.parse(cleanedContent);\n  } else if (typeof content === 'object') {\n    taskData = content;\n  }\n  \n  console.log(\"è§£æå¾Œçš„ä»»å‹™è³‡æ–™:\", taskData);\n  \n} catch (error) {\n  console.error(\"è§£æéŒ¯èª¤:\", error);\n  console.log(\"åŸå§‹è³‡æ–™:\", JSON.stringify($json, null, 2));\n  \n  return {\n    json: {\n      hasTask: false,\n      message: \"ç„¡æ³•å¾è¨Šæ¯ä¸­æå–å¾…è¾¦äº‹é …\",\n      error: error.message\n    }\n  };\n}\n\n// å¦‚æœæ˜¯å¤šä»»å‹™æ ¼å¼ï¼Œå–ç¬¬ä¸€å€‹\nif (taskData && taskData.tasks && Array.isArray(taskData.tasks)) {\n  if (taskData.tasks.length === 0) {\n    return {\n      json: {\n        hasTask: false,\n        message: \"è¨Šæ¯ä¸­æ²’æœ‰æ‰¾åˆ°å¾…è¾¦äº‹é …\"\n      }\n    };\n  }\n  taskData = taskData.tasks[0];\n  console.log(\"åµæ¸¬åˆ°å¤šä»»å‹™æ ¼å¼ï¼Œè™•ç†ç¬¬ä¸€å€‹ä»»å‹™\");\n}\n\n// æª¢æŸ¥æ˜¯å¦æœ‰æœ‰æ•ˆçš„ä»»å‹™\nif (!taskData || !taskData.subject || taskData.subject === null) {\n  return {\n    json: {\n      hasTask: false,\n      message: \"è¨Šæ¯ä¸­æ²’æœ‰æ‰¾åˆ°å¾…è¾¦äº‹é …\",\n      debug: \"subject æ¬„ä½ä¸å­˜åœ¨æˆ–ç‚º null\"\n    }\n  };\n}\n\n// æº–å‚™ Microsoft To Do æ ¼å¼çš„è³‡æ–™\nconst result = {\n  hasTask: true,\n  title: taskData.subject,\n  body: {\n    content: taskData.content || \"\",\n    contentType: \"text\"\n  },\n  importance: \"normal\",\n  categories: [],\n};\n\n// è™•ç†åˆ°æœŸæ—¥æœŸ - ä½¿ç”¨ UTC ä¸­åˆ,ç¢ºä¿åœ¨æ‰€æœ‰æ™‚å€éƒ½é¡¯ç¤ºæ­£ç¢ºæ—¥æœŸ\nif (taskData.due) {\n  // Gemini å›å‚³æ ¼å¼: \"2025-10-17\"\n  // è½‰æ›ç‚º UTC ä¸­åˆæ™‚é–“,é¿å…æ™‚å€å•é¡Œ\n  const formattedDue = taskData.due + 'T12:00:00.0000000';\n  \n  result.dueDateTime = {\n    dateTime: formattedDue,\n    timeZone: \"UTC\"\n  };\n  result.dueTaiwanTime = taskData.due;\n}\n\n// è™•ç†æé†’æ™‚é–“ - ä½¿ç”¨å°åŒ—æ™‚å€\nif (taskData.reminder) {\n  const formattedReminder = taskData.reminder.replace(' ', 'T') + '.0000000';\n  result.isReminderOn = true;\n  result.reminderDateTime = {\n    dateTime: formattedReminder,\n    timeZone: \"Asia/Taipei\"\n  };\n  result.reminderTaiwanTime = taskData.reminder;\n}\n\n// å¾è¨Šæ¯é¡å‹åˆ¤æ–·ç¯€é»å–å¾—é¡å¤–è³‡è¨Š\ntry {\n  const messageInfo = $('è¨Šæ¯é¡å‹åˆ¤æ–·1').item.json;\n  result.userId = messageInfo.userId || 'unknown';\n  result.replyToken = messageInfo.replyToken;\n  result.messageType = messageInfo.messageType;\n  result.source = messageInfo.route;\n} catch (e) {\n  console.log(\"ç„¡æ³•å–å¾—è¨Šæ¯è³‡è¨Š:\", e.message);\n  result.userId = 'unknown';\n  result.source = 'unknown';\n}\n\n// åŠ å…¥è™•ç†æ™‚é–“æˆ³è¨˜\nresult.processedAt = new Date().toISOString();\n\n// ç”Ÿæˆ LINE å›è¦†è¨Šæ¯\nlet replyText = `âœ… å¾…è¾¦äº‹é …å·²å»ºç«‹\\n\\nğŸ“ ${result.title}`;\n\nif (taskData.content) {\n  replyText += `\\nğŸ“„ èªªæ˜ï¼š${taskData.content}`;\n}\n\nif (taskData.due) {\n  // åªé¡¯ç¤ºæ—¥æœŸ\n  try {\n    const [year, month, day] = taskData.due.split('-');\n    replyText += `\\nğŸ“… åˆ°æœŸï¼š${month}/${day}`;\n  } catch (e) {\n    replyText += `\\nğŸ“… åˆ°æœŸï¼š${taskData.due}`;\n  }\n}\n\nif (taskData.reminder) {\n  try {\n    const [datePart, timePart] = taskData.reminder.split(' ');\n    const [year, month, day] = datePart.split('-');\n    const [hour, minute] = timePart.split(':');\n    \n    replyText += `\\nâ° æé†’ï¼š${month}/${day} ${hour}:${minute}`;\n  } catch (e) {\n    replyText += `\\nâ° æé†’ï¼š${taskData.reminder}`;\n  }\n}\n\nresult.replyMessage = replyText;\n\n// è¼¸å‡ºåµéŒ¯è³‡è¨Š\nconsole.log(\"æœ€çµ‚è¼¸å‡º:\", {\n  title: result.title,\n  dueDateTime: result.dueDateTime,\n  reminderDateTime: result.reminderDateTime,\n  replyMessage: result.replyMessage\n});\n\n// å›å‚³å–®ä¸€ç‰©ä»¶\nreturn {\n  json: result\n};"
      },
      "id": "5cd7d257-7804-488c-aea2-2a773ca8b9cc",
      "name": "è™•ç†åˆ†æçµæœ1",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -16,
        176
      ]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.line.me/v2/bot/message/reply",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={{ JSON.stringify($json) }}",
        "options": {}
      },
      "id": "f24111ac-0390-4c8f-b337-1931ad5a6dfc",
      "name": "å›è¦†LINEè¨Šæ¯çµæœ1",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        864,
        176
      ],
      "credentials": {
        "httpHeaderAuth": {
          "id": "7r1KaKeljG2wL19f",
          "name": "Header Auth Account(å“ˆå“ˆå“ˆå“ˆ)"
        }
      }
    },
    {
      "parameters": {
        "operation": "create",
        "taskListId": "AAMkADAxMDc2NjQ3LTA2MjEtNDQzZC1hOTczLTBiNTlhMTA3YTcwMAAuAAAAAADq28zB16HATaS_2IHsHg-1AQDA7LaQIYu1SY-OEypYbO7ZAAbD4gUyAAA=",
        "title": "={{ $json.title }}",
        "additionalFields": {
          "content": "={{ $json.body.content }}",
          "dueDateTime": "={{ $json.dueDateTime.dateTime }}",
          "reminderDateTime": "={{ $json.reminderDateTime.dateTime }}"
        }
      },
      "type": "n8n-nodes-base.microsoftToDo",
      "typeVersion": 1,
      "position": [
        416,
        176
      ],
      "id": "95f86c45-d379-4900-923e-e6fe12aa60f9",
      "name": "Create a task",
      "alwaysOutputData": false,
      "executeOnce": false,
      "retryOnFail": false,
      "notesInFlow": false,
      "credentials": {
        "microsoftToDoOAuth2Api": {
          "id": "gDz7VIVSNDHfJ4FI",
          "name": "Microsoft To Do account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// å–å¾—å»ºç«‹çš„ä»»å‹™è³‡è¨Š\nconst task = $input.first().json;\nconst replyToken = $('LINE Webhook è§¸ç™¼å™¨1').item.json.body.events[0].replyToken;\n\n// æª¢æŸ¥ä»»å‹™æ˜¯å¦æˆåŠŸå»ºç«‹\nif (!task.id) {\n  return {\n    json: {\n      replyToken: replyToken,\n      messages: [\n        {\n          type: \"text\",\n          text: \"âŒ ä»»å‹™å»ºç«‹å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦\"\n        }\n      ]\n    }\n  };\n}\n\n// å»ºç«‹æˆåŠŸè¨Šæ¯\nlet replyText = `âœ… å¾…è¾¦äº‹é …å·²å»ºç«‹\\n\\nğŸ“ ${task.title}`;\n\n// åŠ å…¥å…§å®¹æè¿°\nif (task.body && task.body.content) {\n  replyText += `\\nğŸ“„ ${task.body.content}`;\n}\n\n// åŠ å…¥åˆ°æœŸæ—¥ - åªé¡¯ç¤ºæ—¥æœŸ,ä¸é¡¯ç¤ºæ™‚é–“\nif (task.dueDateTime && task.dueDateTime.dateTime) {\n  try {\n    const utcDate = new Date(task.dueDateTime.dateTime + 'Z');\n    const taipeiDate = new Date(utcDate.getTime() + (8 * 60 * 60 * 1000));\n    \n    const month = String(taipeiDate.getMonth() + 1).padStart(2, '0');\n    const day = String(taipeiDate.getDate()).padStart(2, '0');\n    \n    replyText += `\\nğŸ“… åˆ°æœŸï¼š${month}/${day}`;\n  } catch (e) {\n    console.error(\"æ—¥æœŸæ ¼å¼åŒ–éŒ¯èª¤:\", e);\n  }\n}\n\n// åŠ å…¥æé†’ - é¡¯ç¤ºæ—¥æœŸ+æ™‚é–“\nif (task.reminderDateTime && task.reminderDateTime.dateTime) {\n  try {\n    const utcDate = new Date(task.reminderDateTime.dateTime + 'Z');\n    const taipeiDate = new Date(utcDate.getTime() + (8 * 60 * 60 * 1000));\n    \n    const month = String(taipeiDate.getMonth() + 1).padStart(2, '0');\n    const day = String(taipeiDate.getDate()).padStart(2, '0');\n    const hour = String(taipeiDate.getHours()).padStart(2, '0');\n    const minute = String(taipeiDate.getMinutes()).padStart(2, '0');\n    \n    replyText += `\\nâ° æé†’ï¼š${month}/${day} ${hour}:${minute}`;\n  } catch (e) {\n    console.error(\"æé†’æ™‚é–“æ ¼å¼åŒ–éŒ¯èª¤:\", e);\n  }\n}\n\n// åŠ å…¥é‡è¦æ€§æ¨™è¨˜\nif (task.importance === 'high') {\n  replyText += `\\nâš ï¸ é‡è¦æ€§ï¼šé«˜`;\n}\n\n// å›å‚³ LINE API æ ¼å¼\nreturn {\n  json: {\n    replyToken: replyToken,\n    messages: [\n      {\n        type: \"text\",\n        text: replyText\n      }\n    ]\n  }\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        640,
        176
      ],
      "id": "faaf7f7c-41e4-4615-add8-c3e55db0a349",
      "name": "æº–å‚™å›è¦†è¨Šæ¯"
    }
  ],
  "pinData": {},
  "connections": {
    "Gemini åˆ†æåœ–ç‰‡å…§å®¹": {
      "main": [
        [
          {
            "node": "è™•ç†åˆ†æçµæœ1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Gemini åˆ†ææ–‡å­—è¨Šæ¯": {
      "main": [
        [
          {
            "node": "è™•ç†åˆ†æçµæœ1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Gemini åˆ†æèªéŸ³è½‰æ–‡å­—å¾Œè¨Šæ¯": {
      "main": [
        [
          {
            "node": "è™•ç†åˆ†æçµæœ1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Gemini èªéŸ³è½‰æ–‡å­—": {
      "main": [
        [
          {
            "node": "Gemini åˆ†æèªéŸ³è½‰æ–‡å­—å¾Œè¨Šæ¯",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "LINE Webhook è§¸ç™¼å™¨1": {
      "main": [
        [
          {
            "node": "è¨Šæ¯é¡å‹åˆ¤æ–·1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "è¨Šæ¯é¡å‹åˆ¤æ–·1": {
      "main": [
        [
          {
            "node": "è·¯ç”±åˆ†é…1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "è·¯ç”±åˆ†é…1": {
      "main": [
        [
          {
            "node": "å–å¾—åœ–ç‰‡å…§å®¹1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Gemini åˆ†ææ–‡å­—è¨Šæ¯",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "å–å¾—èªéŸ³å…§å®¹1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "å–å¾—åœ–ç‰‡å…§å®¹1": {
      "main": [
        [
          {
            "node": "Gemini åˆ†æåœ–ç‰‡å…§å®¹",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "å–å¾—èªéŸ³å…§å®¹1": {
      "main": [
        [
          {
            "node": "Gemini èªéŸ³è½‰æ–‡å­—",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "è™•ç†åˆ†æçµæœ1": {
      "main": [
        [
          {
            "node": "Create a task",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Create a task": {
      "main": [
        [
          {
            "node": "æº–å‚™å›è¦†è¨Šæ¯",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "æº–å‚™å›è¦†è¨Šæ¯": {
      "main": [
        [
          {
            "node": "å›è¦†LINEè¨Šæ¯çµæœ1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1",
    "timezone": "Asia/Taipei",
    "callerPolicy": "workflowsFromSameOwner"
  },
  "versionId": "63ca0a15-206f-49a8-b2dd-5ed4a647b59a",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "173e90798b194ce1f2371138ef6c7e84ef25a71b3ff7a589cf1cbb5017d96a74"
  },
  "id": "Cit4OTNBu8Bn088S",
  "tags": []
}